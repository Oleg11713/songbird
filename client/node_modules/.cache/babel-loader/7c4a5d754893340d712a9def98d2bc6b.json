{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u043E\\u043B\\u0435\\u0433/Desktop/iTechArt_\\u0421\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/songbird/songbird/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/\\u043E\\u043B\\u0435\\u0433/Desktop/iTechArt_\\u0421\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/songbird/songbird/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/\\u043E\\u043B\\u0435\\u0433/Desktop/iTechArt_\\u0421\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/songbird/songbird/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{toast,ToastContainer}from\"react-toastify\";import{useFormik}from\"formik\";import*as yup from\"yup\";import{TextField}from\"@material-ui/core\";import CustomButton from\"../customButton\";import{auth,createUserProfileDocument}from\"../../firebase/utils\";import\"./styles.scss\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SignUp=function SignUp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var validationSchema=yup.object({firstName:yup.string().required(\"Пожалуйста, заполните данное поле\"),secondName:yup.string().required(\"Пожалуйста, заполните данное поле\"),email:yup.string().email(\"Введите корректный адрес эл. почты\").required(\"Пожалуйста, заполните данное поле\"),password:yup.string().required(\"Пожалуйста, заполните данное поле\"),passwordConfirm:yup.string().required(\"Пожалуйста, заполните данное поле\")});var handleSubmit=function handleSubmit(event){event.preventDefault();formik.handleSubmit();};var formik=useFormik({initialValues:{firstName:\"\",secondName:\"\",email:\"\",password:\"\",passwordConfirm:\"\"},onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var _yield$auth$createUse,user,displayName,password;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(values.password!==values.passwordConfirm)){_context.next=2;break;}return _context.abrupt(\"return\",toast.error(\"Пароли не совпадают\",{className:\"toast-error\",draggable:false,position:toast.POSITION.BOTTOM_CENTER}));case 2:_context.prev=2;setLoading(true);_context.next=6;return auth.createUserWithEmailAndPassword(values.email,values.password);case 6:_yield$auth$createUse=_context.sent;user=_yield$auth$createUse.user;displayName=values.firstName+\" \"+values.secondName;password=values.password;_context.next=12;return createUserProfileDocument(user,{displayName:displayName,password:password});case 12:toast.success(\"Вы успешно зарегистрировались\",{className:\"toast-success\",draggable:false,position:toast.POSITION.BOTTOM_CENTER});values.firstName=\"\";values.secondName=\"\";values.email=\"\";values.password=\"\";values.passwordConfirm=\"\";_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](2);toast.error(\"Не удалось зарегистрироваться\",{className:\"toast-error\",draggable:false,position:toast.POSITION.BOTTOM_CENTER});case 23:setLoading(false);case 24:case\"end\":return _context.stop();}}},_callee,null,[[2,20]]);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}(),validationSchema:validationSchema});return/*#__PURE__*/_jsxs(\"div\",{className:\"sign-up\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\u0423 \\u043C\\u0435\\u043D\\u044F \\u043D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C, \\u0443\\u043A\\u0430\\u0437\\u0430\\u0432 \\u0441\\u0432\\u043E\\u0439 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u044D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u043E\\u0439 \\u043F\\u043E\\u0447\\u0442\\u044B \\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"sign-up-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{id:\"firstName\",name:\"firstName\",label:\"First Name\",value:formik.values.firstName,onChange:formik.handleChange,error:formik.touched.firstName&&Boolean(formik.errors.firstName),helperText:formik.touched.firstName&&formik.errors.firstName}),/*#__PURE__*/_jsx(TextField,{id:\"secondName\",name:\"secondName\",label:\"Second Name\",value:formik.values.secondName,onChange:formik.handleChange,error:formik.touched.secondName&&Boolean(formik.errors.secondName),helperText:formik.touched.secondName&&formik.errors.secondName}),/*#__PURE__*/_jsx(TextField,{id:\"emailSignUp\",name:\"email\",label:\"Email\",value:formik.values.email,onChange:formik.handleChange,error:formik.touched.email&&Boolean(formik.errors.email),helperText:formik.touched.email&&formik.errors.email}),/*#__PURE__*/_jsx(TextField,{id:\"passwordSignUp\",name:\"password\",type:\"password\",label:\"Password\",value:formik.values.password,onChange:formik.handleChange,error:formik.touched.password&&Boolean(formik.errors.password),helperText:formik.touched.password&&formik.errors.password}),/*#__PURE__*/_jsx(TextField,{id:\"passwordConfirm\",name:\"passwordConfirm\",type:\"password\",value:formik.values.passwordConfirm,onChange:formik.handleChange,error:formik.touched.passwordConfirm&&Boolean(formik.errors.passwordConfirm),helperText:formik.touched.passwordConfirm&&formik.errors.passwordConfirm,label:\"Confirm Password\"}),/*#__PURE__*/_jsx(CustomButton,{disabled:loading,type:\"submit\",children:\"SIGN UP\"})]}),/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ToastContainer,{})})]});};export default SignUp;","map":{"version":3,"sources":["C:/Users/олег/Desktop/iTechArt_Стажировка/songbird/songbird/src/components/signUp/index.jsx"],"names":["React","useState","toast","ToastContainer","useFormik","yup","TextField","CustomButton","auth","createUserProfileDocument","SignUp","loading","setLoading","validationSchema","object","firstName","string","required","secondName","email","password","passwordConfirm","handleSubmit","event","preventDefault","formik","initialValues","onSubmit","values","error","className","draggable","position","POSITION","BOTTOM_CENTER","createUserWithEmailAndPassword","user","displayName","success","handleChange","touched","Boolean","errors"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { useFormik } from \"formik\";\nimport * as yup from \"yup\";\nimport { TextField } from \"@material-ui/core\";\n\nimport CustomButton from \"../customButton\";\nimport { auth, createUserProfileDocument } from \"../../firebase/utils\";\n\nimport \"./styles.scss\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst SignUp = () => {\n  const [loading, setLoading] = useState(false);\n\n  const validationSchema = yup.object({\n    firstName: yup.string().required(\"Пожалуйста, заполните данное поле\"),\n    secondName: yup.string().required(\"Пожалуйста, заполните данное поле\"),\n    email: yup\n      .string()\n      .email(\"Введите корректный адрес эл. почты\")\n      .required(\"Пожалуйста, заполните данное поле\"),\n    password: yup.string().required(\"Пожалуйста, заполните данное поле\"),\n    passwordConfirm: yup.string().required(\"Пожалуйста, заполните данное поле\"),\n  });\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    formik.handleSubmit();\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      firstName: \"\",\n      secondName: \"\",\n      email: \"\",\n      password: \"\",\n      passwordConfirm: \"\",\n    },\n    onSubmit: async (values) => {\n      if (values.password !== values.passwordConfirm) {\n        return toast.error(\"Пароли не совпадают\", {\n          className: \"toast-error\",\n          draggable: false,\n          position: toast.POSITION.BOTTOM_CENTER,\n        });\n      }\n\n      try {\n        setLoading(true);\n        const { user } = await auth.createUserWithEmailAndPassword(\n          values.email,\n          values.password\n        );\n        const displayName = values.firstName + \" \" + values.secondName;\n        const password = values.password;\n        await createUserProfileDocument(user, { displayName, password });\n        toast.success(\"Вы успешно зарегистрировались\", {\n          className: \"toast-success\",\n          draggable: false,\n          position: toast.POSITION.BOTTOM_CENTER,\n        });\n        values.firstName = \"\";\n        values.secondName = \"\";\n        values.email = \"\";\n        values.password = \"\";\n        values.passwordConfirm = \"\";\n      } catch {\n        toast.error(\"Не удалось зарегистрироваться\", {\n          className: \"toast-error\",\n          draggable: false,\n          position: toast.POSITION.BOTTOM_CENTER,\n        });\n      }\n      setLoading(false);\n    },\n    validationSchema: validationSchema,\n  });\n\n  return (\n    <div className=\"sign-up\">\n      <div className=\"title\">У меня нет аккаунта</div>\n      <div>Зарегистрируйтесь, указав свой адрес электронной почты и пароль</div>\n      <form className=\"sign-up-form\" onSubmit={handleSubmit}>\n        <TextField\n          id=\"firstName\"\n          name=\"firstName\"\n          label=\"First Name\"\n          value={formik.values.firstName}\n          onChange={formik.handleChange}\n          error={formik.touched.firstName && Boolean(formik.errors.firstName)}\n          helperText={formik.touched.firstName && formik.errors.firstName}\n        />\n        <TextField\n          id=\"secondName\"\n          name=\"secondName\"\n          label=\"Second Name\"\n          value={formik.values.secondName}\n          onChange={formik.handleChange}\n          error={formik.touched.secondName && Boolean(formik.errors.secondName)}\n          helperText={formik.touched.secondName && formik.errors.secondName}\n        />\n        <TextField\n          id=\"emailSignUp\"\n          name=\"email\"\n          label=\"Email\"\n          value={formik.values.email}\n          onChange={formik.handleChange}\n          error={formik.touched.email && Boolean(formik.errors.email)}\n          helperText={formik.touched.email && formik.errors.email}\n        />\n        <TextField\n          id=\"passwordSignUp\"\n          name=\"password\"\n          type=\"password\"\n          label=\"Password\"\n          value={formik.values.password}\n          onChange={formik.handleChange}\n          error={formik.touched.password && Boolean(formik.errors.password)}\n          helperText={formik.touched.password && formik.errors.password}\n        />\n        <TextField\n          id=\"passwordConfirm\"\n          name=\"passwordConfirm\"\n          type=\"password\"\n          value={formik.values.passwordConfirm}\n          onChange={formik.handleChange}\n          error={\n            formik.touched.passwordConfirm &&\n            Boolean(formik.errors.passwordConfirm)\n          }\n          helperText={\n            formik.touched.passwordConfirm && formik.errors.passwordConfirm\n          }\n          label=\"Confirm Password\"\n        />\n        <CustomButton disabled={loading} type=\"submit\">\n          SIGN UP\n        </CustomButton>\n      </form>\n      <>\n        <ToastContainer />\n      </>\n    </div>\n  );\n};\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}