{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u043E\\u043B\\u0435\\u0433/Desktop/iTechArt_\\u0421\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/songbird/songbird/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import Slider from\"../slider/Slider\";import ControlPanel from\"../controls/ControlPanel\";import Button from\"../controls/Button\";import\"./styles.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AudioPlayer=function AudioPlayer(_ref){var audio=_ref.audio;var PERCENTAGE=100;var AUDIO_VOLUME=0.4;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),percentage=_useState2[0],setPercentage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPlaying=_useState4[0],setIsPlaying=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),duration=_useState6[0],setDuration=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),currentTime=_useState8[0],setCurrentTime=_useState8[1];var audioRef=useRef();var onChange=function onChange(e){var audio=audioRef.current;audio.currentTime=audio.duration/PERCENTAGE*e.target.value;setPercentage(e.target.value);};var play=function play(){var audio=audioRef.current;audio.volume=AUDIO_VOLUME;if(!isPlaying){setIsPlaying(true);audio.play();}if(isPlaying){setIsPlaying(false);audio.pause();}};var getCurrDuration=function getCurrDuration(e){var percent=(e.currentTarget.currentTime/e.currentTarget.duration*PERCENTAGE).toFixed(2);var time=e.currentTarget.currentTime;setPercentage(+percent);setCurrentTime(time.toFixed(2));};return/*#__PURE__*/_jsxs(\"div\",{className:\"audio-bar\",children:[/*#__PURE__*/_jsx(Button,{play:play,isPlaying:isPlaying}),/*#__PURE__*/_jsxs(\"div\",{className:\"audio-slider\",children:[/*#__PURE__*/_jsx(Slider,{percentage:percentage,onChange:onChange}),/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,onTimeUpdate:getCurrDuration,onLoadedData:function onLoadedData(e){setDuration(e.currentTarget.duration.toFixed(2));},src:audio}),/*#__PURE__*/_jsx(ControlPanel,{play:play,isPlaying:isPlaying,duration:duration,currentTime:currentTime})]})]});};export default AudioPlayer;","map":{"version":3,"sources":["C:/Users/олег/Desktop/iTechArt_Стажировка/songbird/songbird/src/components/audio/index.jsx"],"names":["React","useRef","useState","Slider","ControlPanel","Button","AudioPlayer","audio","PERCENTAGE","AUDIO_VOLUME","percentage","setPercentage","isPlaying","setIsPlaying","duration","setDuration","currentTime","setCurrentTime","audioRef","onChange","e","current","target","value","play","volume","pause","getCurrDuration","percent","currentTarget","toFixed","time"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\n\nimport Slider from \"../slider/Slider\";\nimport ControlPanel from \"../controls/ControlPanel\";\nimport Button from \"../controls/Button\";\n\nimport \"./styles.scss\";\n\nconst AudioPlayer = ({ audio }) => {\n  const PERCENTAGE = 100;\n  const AUDIO_VOLUME = 0.4;\n\n  const [percentage, setPercentage] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [duration, setDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n\n  const audioRef = useRef();\n\n  const onChange = (e) => {\n    const audio = audioRef.current;\n    audio.currentTime = (audio.duration / PERCENTAGE) * e.target.value;\n    setPercentage(e.target.value);\n  };\n\n  const play = () => {\n    const audio = audioRef.current;\n    audio.volume = AUDIO_VOLUME;\n\n    if (!isPlaying) {\n      setIsPlaying(true);\n      audio.play();\n    }\n\n    if (isPlaying) {\n      setIsPlaying(false);\n      audio.pause();\n    }\n  };\n\n  const getCurrDuration = (e) => {\n    const percent = (\n      (e.currentTarget.currentTime / e.currentTarget.duration) *\n      PERCENTAGE\n    ).toFixed(2);\n    const time = e.currentTarget.currentTime;\n\n    setPercentage(+percent);\n    setCurrentTime(time.toFixed(2));\n  };\n\n  return (\n    <div className=\"audio-bar\">\n      <Button play={play} isPlaying={isPlaying} />\n      <div className=\"audio-slider\">\n        <Slider percentage={percentage} onChange={onChange} />\n        <audio\n          ref={audioRef}\n          onTimeUpdate={getCurrDuration}\n          onLoadedData={(e) => {\n            setDuration(e.currentTarget.duration.toFixed(2));\n          }}\n          src={audio}\n        />\n        <ControlPanel\n          play={play}\n          isPlaying={isPlaying}\n          duration={duration}\n          currentTime={currentTime}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n"]},"metadata":{},"sourceType":"module"}