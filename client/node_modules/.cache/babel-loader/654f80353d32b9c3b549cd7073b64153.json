{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u043E\\u043B\\u0435\\u0433/Desktop/iTechArt_\\u0421\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/songbird/songbird/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/\\u043E\\u043B\\u0435\\u0433/Desktop/iTechArt_\\u0421\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/songbird/songbird/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/\\u043E\\u043B\\u0435\\u0433/Desktop/iTechArt_\\u0421\\u0442\\u0430\\u0436\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430/songbird/songbird/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import firebase from\"firebase/compat\";import\"firebase/firestore\";import\"firebase/auth\";firebase.initializeApp({apiKey:\"AIzaSyAeFnC-Emz4SVnuszbN0wxi8pBhNg2A8hQ\",authDomain:\"songbird-41f8d.firebaseapp.com\",projectId:\"songbird-41f8d\",storageBucket:\"songbird-41f8d.appspot.com\",messagingSenderId:\"348563519581\",appId:\"1:348563519581:web:764bda33cdebf4ecf4f5b4\",measurementId:\"G-HQEX45HXBE\"});export var createUserProfileDocument=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth,additionalData){var userRef,snapShot,email,displayName,createdAt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(userAuth){_context.next=2;break;}return _context.abrupt(\"return\");case 2:userRef=firestore.doc(\"users/\".concat(userAuth.uid));_context.next=5;return userRef.get();case 5:snapShot=_context.sent;if(snapShot.exists){_context.next=17;break;}email=userAuth.email,displayName=userAuth.displayName;createdAt=new Date();_context.prev=9;_context.next=12;return userRef.set(_objectSpread({email:email,displayName:displayName,createdAt:createdAt},additionalData));case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);console.log(\"error creating user\",_context.t0.message());case 17:return _context.abrupt(\"return\",userRef);case 18:case\"end\":return _context.stop();}}},_callee,null,[[9,14]]);}));return function createUserProfileDocument(_x,_x2){return _ref.apply(this,arguments);};}();export var auth=firebase.auth();export var firestore=firebase.firestore();","map":{"version":3,"sources":["C:/Users/олег/Desktop/iTechArt_Стажировка/songbird/songbird/src/firebase/utils.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createUserProfileDocument","userAuth","additionalData","userRef","firestore","doc","uid","get","snapShot","exists","email","displayName","createdAt","Date","set","console","log","message","auth"],"mappings":"wnBAAA,MAAOA,CAAAA,QAAP,KAAqB,iBAArB,CACA,MAAO,oBAAP,CACA,MAAO,eAAP,CAEAA,QAAQ,CAACC,aAAT,CAAuB,CACrBC,MAAM,CAAE,yCADa,CAErBC,UAAU,CAAE,gCAFS,CAGrBC,SAAS,CAAE,gBAHU,CAIrBC,aAAa,CAAE,4BAJM,CAKrBC,iBAAiB,CAAE,cALE,CAMrBC,KAAK,CAAE,2CANc,CAOrBC,aAAa,CAAE,cAPM,CAAvB,EAUA,MAAO,IAAMC,CAAAA,yBAAyB,0FAAG,iBAAOC,QAAP,CAAiBC,cAAjB,sKAClCD,QADkC,iEAGjCE,OAHiC,CAGvBC,SAAS,CAACC,GAAV,iBAAuBJ,QAAQ,CAACK,GAAhC,EAHuB,uBAKhBH,CAAAA,OAAO,CAACI,GAAR,EALgB,QAKjCC,QALiC,kBAOlCA,QAAQ,CAACC,MAPyB,0BAQ7BC,KAR6B,CAQNT,QARM,CAQ7BS,KAR6B,CAQtBC,WARsB,CAQNV,QARM,CAQtBU,WARsB,CAS/BC,SAT+B,CASnB,GAAIC,CAAAA,IAAJ,EATmB,wCAW7BV,CAAAA,OAAO,CAACW,GAAR,gBACJJ,KAAK,CAALA,KADI,CAEJC,WAAW,CAAXA,WAFI,CAGJC,SAAS,CAATA,SAHI,EAIDV,cAJC,EAX6B,0FAkBnCa,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAmC,YAAMC,OAAN,EAAnC,EAlBmC,wCAsBhCd,OAtBgC,uEAAH,kBAAzBH,CAAAA,yBAAyB,gDAA/B,CAyBP,MAAO,IAAMkB,CAAAA,IAAI,CAAG3B,QAAQ,CAAC2B,IAAT,EAAb,CACP,MAAO,IAAMd,CAAAA,SAAS,CAAGb,QAAQ,CAACa,SAAT,EAAlB","sourcesContent":["import firebase from \"firebase/compat\";\nimport \"firebase/firestore\";\nimport \"firebase/auth\";\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyAeFnC-Emz4SVnuszbN0wxi8pBhNg2A8hQ\",\n  authDomain: \"songbird-41f8d.firebaseapp.com\",\n  projectId: \"songbird-41f8d\",\n  storageBucket: \"songbird-41f8d.appspot.com\",\n  messagingSenderId: \"348563519581\",\n  appId: \"1:348563519581:web:764bda33cdebf4ecf4f5b4\",\n  measurementId: \"G-HQEX45HXBE\",\n});\n\nexport const createUserProfileDocument = async (userAuth, additionalData) => {\n  if (!userAuth) return;\n\n  const userRef = firestore.doc(`users/${userAuth.uid}`);\n\n  const snapShot = await userRef.get();\n\n  if (!snapShot.exists) {\n    const { email, displayName } = userAuth;\n    const createdAt = new Date();\n    try {\n      await userRef.set({\n        email,\n        displayName,\n        createdAt,\n        ...additionalData,\n      });\n    } catch (error) {\n      console.log(\"error creating user\", error.message());\n    }\n  }\n\n  return userRef;\n};\n\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\n"]},"metadata":{},"sourceType":"module"}